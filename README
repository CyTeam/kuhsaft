== Kuhsaft. A CMS as simple as it could be

Yiiihaaaaaa! Howdy, Let's milk the cow!

== The Who, What and Why?

Kuhsaft is made by some Rails developers at Screen Concept that got tired of
fiddling with unusable content management sytems. We are trying hard to make a
minimalistic and developer friendly CMS. Our goal is to provide a system for
ourselves and our customers that makes the of-the-shelf website project a
hasselfree thing. On one side easy to set up, integrate and customize (good for
devs) on the other hand it should be easily usable by anyone.

== Requirements

Kuhsaft requires

* A Rails 3 app to be integrated into
* ImageMagick
* An ActiveRecord compatible DB

== Installation

Add Kuhsaft to your Gemfile:

  gem 'kuhsaft'

And run

  bundle install

to get the gem

Then install the migrations and run them:

  rails generate kuhsaft:install:migrations && rake db:migrate
  rails generate kuhsaft:install:assets

(NOTE: Steps below should hopefully not be necessary in future versions:)

Finally, you need to add a before filter to the application controller (for now...)

  ApplicationController < ActionController::Base
    before_filter :available_locales

    def available_locales
      Kuhsaft::Page.translation_locales = ['de', 'en', 'fr']
    end
  end

If you want to use devise for protecting the admin parts, do this in an initializer:

Kuhsaft::Cms::PagesController.class_eval do
  before_filter :authenticate_user!
end

== Usage

... to be continued


== Adding new migrations in development

1. create your_migration.rb in lib/temlates/kuhsaft/install
2. drop migrations in spec/dummy/db/migrate: rm spec/dummy/db/migrate/*.rb
3. drop existing development and test DB for the spec/dummy app: rake db:drop:all
4. install new migrations:rails g kuhsaft:install:migrations
5. run specs for your engine: rspec spec/, which generates your test tables with the new migrations (see spec_helper.rb)
